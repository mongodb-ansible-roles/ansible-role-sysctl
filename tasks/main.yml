---
- name: Get Linux Kernel Version
  set_fact:
    linux_kernel_version: '{{ ansible_kernel.split("-")[0].split(".")[:2] | join(".") }}'

# Only run this on linux with kernel versions higher than 4.11
- name: Enable TCP_FASTOPEN
  sysctl:
    name: net.ipv4.tcp_fastopen
    value: '3'
    state: present
    reload: no
  when:
    linux_kernel_version is version('4.11', '>=')
